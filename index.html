<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é­”å…½ä¸–ç•ŒTBCå¤–ç½‘ç¿»è¯‘å·¥å…·</title>
    <!-- å¼•å…¥ Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/3.5.13/vue.global.min.js"></script>
    <!-- ç™¾åº¦ç¿»è¯‘ API éœ€è¦ä½¿ç”¨ MD5 è¿›è¡Œç­¾åï¼Œæ¨èä½¿ç”¨ Blueimp MD5ï¼š -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.18.0/js/md5.min.js"></script>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = { darkMode: 'class' };
    </script>
  </head>

  <!-- 
  smï¼šå±å¹•å®½åº¦ 640px ã€‚
  mdï¼šå±å¹•å®½åº¦ 768px ã€‚
  lgï¼šå±å¹•å®½åº¦ 1024px ã€‚
  xlï¼šå±å¹•å®½åº¦ 1280px ã€‚
  2xlï¼šå±å¹•å®½åº¦ 1536px ã€‚ 
  -->
  <body
    :class="{ 'dark': isDarkMode }"
    class="bg-stone-100 text-stone-800 dark:bg-stone-900 dark:text-stone-50 p-5 select-none"
  >
    <div
      id="app"
      class="relative max-w-3xl mx-auto bg-stone-100 p-6 rounded-lg shadow-md dark:bg-stone-800"
    >
      <div class="flex items-baseline justify-between mb-4">
        <h2 class="text-xl font-bold mb-4">é­”å…½ä¸–ç•ŒTBCå¤–ç½‘ç¿»è¯‘å·¥å…·</h2>

        <!-- Theme Toggle Button -->
        <div
          class="h-8 w-8 text-center theme-toggle px-1 py-1 rounded cursor-pointer transition duration-300 bg-stone-100 text-stone-800 dark:bg-stone-700 dark:text-stone-100 hover:bg-stone-200 dark:hover:bg-stone-600"
          @click="toggleTheme"
        >
          {{ isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸' }}
        </div>
      </div>

      <!-- Tabs -->
      <div class="mb-4 flex">
        <button
          @click="switchTab('dungeon')"
          :class="{
            'bg-stone-400 text-white': activeTab === 'dungeon',
            'bg-stone-200 dark:bg-stone-600 dark:text-stone-100': activeTab !== 'dungeon',
            'transition-all duration-300 ease-in-out': true
          }"
          class="px-2 py-2 rounded-l hover:bg-stone-400 w-1/3"
        >
          å‰¯æœ¬åç§°
        </button>
        <button
          @click="switchTab('translate')"
          :class="{
            'bg-stone-400 text-white': activeTab === 'translate',
            'bg-stone-200 dark:bg-stone-600 dark:text-stone-100': activeTab !== 'translate',
            'transition-all duration-300 ease-in-out': true
          }"
          class="px-2 py-2 hover:bg-stone-400 w-1/3"
        >
          èŠå¤©ç¿»è¯‘
        </button>
        <button
          @click="switchTab('recruit')"
          :class="{
            'bg-stone-400 text-white': activeTab === 'recruit',
            'bg-stone-200 dark:bg-stone-600 dark:text-stone-100': activeTab !== 'recruit',
            'transition-all duration-300 ease-in-out': true
          }"
          class="px-2 py-2 rounded-r hover:bg-stone-400 w-1/3"
        >
          å‰¯æœ¬æ‹›å‹Ÿ
        </button>
      </div>

      <!-- Tab Contents -->
      <div v-if="activeTab === 'dungeon'">
        <textarea
          v-model="inputText"
          placeholder="è¾“å…¥å‰¯æœ¬ç®€å†™è‹±æ–‡, å¦‚ BMã€SHHã€BTç­‰"
          rows="6"
          class="w-full p-2 mb-4 border rounded dark:bg-stone-700 dark:border-stone-600 dark:text-white"
        ></textarea>
        <div class="flex gap-2 mb-4">
          <button
            @click="processText"
            class="px-4 py-2 bg-stone-500 text-white rounded hover:bg-stone-600"
          >
            è¯†åˆ«å‰¯æœ¬åç§°
          </button>
          <button
            @click="clearText"
            class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
          >
            æ¸…é™¤
          </button>
        </div>
        <div
          v-if="outputText"
          class="p-2 bg-gray-100 dark:bg-gray-700 rounded border dark:border-gray-600"
        >
          <p class="whitespace-pre-wrap">{{ outputText }}</p>
        </div>
      </div>

      <!-- Translate Tab -->

      <!-- ç¿»è¯‘èŠå¤©tabå†…å®¹ -->
      <div v-if="activeTab === 'translate'">
        <!-- è¯­è¨€åˆ‡æ¢æ  -->
        <div class="flex items-center justify-between my-3">
          <span class="text-lg font-semibold text-stone-700 dark:text-stone-200"
            >{{ isEnglishToChinese ? 'è‹±æ–‡' : 'ä¸­æ–‡' }}</span
          >
          <!-- Font Awesome äº¤æ¢å›¾æ ‡ -->
          <i
            class="fas fa-right-left text-xl cursor-pointer hover:scale-110 transition-transform text-stone-600 dark:text-stone-300"
            @click="toggleLanguage"
          ></i>
          <span class="text-lg font-semibold text-stone-700 dark:text-stone-200"
            >{{ isEnglishToChinese ? 'ä¸­æ–‡' : 'è‹±æ–‡' }}</span
          >
        </div>

        <!-- ç¿»è¯‘æ¡† -->
        <div class="flex flex-col md:flex-row lg:flex-row gap-4">
          <!-- è¾“å…¥æ¡† -->
          <textarea
            v-model="inputText"
            :placeholder="isEnglishToChinese ? 'åœ¨èŠå¤©ç¿»è¯‘é€‰æ‹© â€œè‹±è¯‘ä¸­â€ çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥è¾“å…¥è‹±æ–‡å†…å®¹ï¼Œå¦‚ï¼š\nFresh KARAZHAN! need Feral/enh/elem//Rsham!!! Check GEAR Aldor BanK! (7/10)\n\nåˆæˆ–è€…ï¼Œç»“åˆèŠå¤©æ¡†æ–‡å­—å¤åˆ¶æ’ä»¶Chatterï¼Œhttps://www.nfuwow.com/plugin/detail/artid/227.htmlï¼Œè¾“å‡ºç²˜è´´çš„è‹±æ–‡ä¸–ç•ŒèŠå¤©è®°å½•ï¼Œå¦‚ï¼š\n[7. world] [Elunaris]: LF3M RFD need tank\n[7. world] [Camelissimo]: Wlock LF Kara any time before reset!\n[7. world] [Zurboorg]: wtb [Righteous Orb]\n[7. world] [Szanyi]: LF2M Alcatraz - tank heal - summ ready\n[7. world] [Elunaris]: LF3M RFD - need tank' : 'åœ¨èŠå¤©ç¿»è¯‘é€‰æ‹© â€œä¸­è¯‘è‹±â€ çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥è¾“å…¥ä¸­æ–‡å†…å®¹ï¼Œå¦‚ï¼šè¿™æ˜¯ä¸€æ®µæµ‹è¯•ä¸­æ–‡ç¿»è¯‘è‹±æ–‡çš„å¥å­ã€‚'"
            rows="6"
            class="w-full md:w-1/2 flex-1 text-sm sm:text-base min-h-[380px] p-3 border rounded bg-stone-100 dark:bg-stone-800 dark:text-stone-100 dark:border-stone-600 placeholder-stone-400 dark:placeholder-stone-500 resize-none overflow-hidden h-auto"
            ref="inputArea"
            @input="adjustHeight($event)"
          ></textarea>

          <!-- è¾“å‡ºæ¡† -->
          <div class="relative w-full md:w-1/2 flex-1">
            <textarea
              v-model="outputText"
              :placeholder="isEnglishToChinese ? 'ç¿»è¯‘åçš„ä¸­æ–‡...' : 'ç¿»è¯‘åçš„è‹±æ–‡...'"
              rows="6"
              readonly
              class="w-full text-sm sm:text-base min-h-[200px] md:min-h-[450px] p-3 border rounded bg-stone-200 dark:bg-stone-700 dark:text-stone-100 dark:border-stone-600 resize-none overflow-hidden h-auto"
              ref="outputArea"
              @input="adjustHeight($event)"
            ></textarea>
            <!-- å¤åˆ¶æŒ‰é’® -->
            <button
              v-if="outputText"
              @click.stop="copyToClipboard(outputText)"
              class="absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded bg-stone-300 hover:bg-stone-400 dark:bg-stone-600 dark:hover:bg-stone-500 text-stone-700 dark:text-white transition-all duration-300"
            >
              <i
                :class="copyTranslateOutputSuccess ? 'fa-solid fa-check' : 'fa-solid fa-copy'"
              ></i>
            </button>
          </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="flex gap-2 mt-4">
          <button
            @click="translateText"
            class="px-4 py-2 bg-amber-500 text-white rounded hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-700"
          >
            å°è¯•ç¿»è¯‘
          </button>
          <button
            @click="clearText"
            class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700"
          >
            æ¸…é™¤
          </button>
        </div>
      </div>

      <!-- Recruit Tab -->
      <div v-if="activeTab === 'recruit'">
        <div class="mb-2">
          <label class="text-stone-700 dark:text-stone-100 mb-2"
            >å‰¯æœ¬åŒºåŸŸï¼š</label
          >
          <select
            v-model="selectedRegion"
            @change="updateDungeonList"
            class="border rounded p-1 my-2 bg-white dark:bg-stone-800 dark:text-stone-100 dark:border-stone-600 w-full"
          >
            <option v-for="region in regions" :key="region" :value="region">
              {{ region }}
            </option>
          </select>
        </div>
        <div class="mb-4">
          <label class="text-stone-700 dark:text-stone-100 pb-2"
            >å‰¯æœ¬åç§°ï¼š</label
          >
          <select
            v-model="selectedDungeon"
            class="border rounded my-2 p-1 bg-white dark:bg-stone-800 dark:text-stone-100 dark:border-stone-600 w-full truncate"
          >
            <option
              v-for="dungeon in filteredDungeons"
              :key="dungeon.key"
              :value="dungeon.value"
            >
              {{ dungeon.value }}
            </option>
          </select>
        </div>

        <div class="mb-4">
          <label class="text-stone-700 dark:text-stone-100 pb-2"
            >å‰¯æœ¬éš¾åº¦ï¼š</label
          >
          <select
            v-model="difficulty"
            class="border rounded p-1 my-2 bg-white dark:bg-stone-800 dark:text-stone-100 dark:border-stone-600 w-full"
          >
            <option value="normal">æ™®é€š(Normal)</option>
            <option value="heroic">è‹±é›„(Heroic)</option>
          </select>
        </div>

        <!-- å…¨é€š/åŠé€šé€‰æ‹© Tabåˆ†é¡µ-->
        <div class="mb-4">
          <label class="block text-stone-700 dark:text-stone-300"
            >å‰¯æœ¬å…¨é€š/åŠé€šï¼š</label
          >
          <div class="flex my-4">
            <button
              v-for="(tab, index) in ['å…¨é€š', 'åŠé€š']"
              :key="index"
              :class="[
                'w-full p-2 first:rounded-l last:rounded-r',
                activeCompletionTab === tab ? 'bg-stone-400 text-white dark:bg-stone-700 dark:text-white' : 'bg-stone-200 text-stone-700 dark:bg-stone-600 dark:text-stone-300',
                index === 0 ? 'rounded-r-none' : '',
                index === 1 ? 'rounded-l-none' : ''
              ]"
              @click="setCompletionMode(tab)"
            >
              {{ tab }}
            </button>
          </div>
        </div>

        <!-- æ ¹æ®TABé€‰æ‹©æ˜¾ç¤ºå†…å®¹ -->

        <!-- BOSS å¤šé€‰æ¡† (ä»…åœ¨åŠé€šæ—¶æ˜¾ç¤º) -->
        <div v-if="activeCompletionTab === 'åŠé€š'" class="mb-2">
          <label class="block text-stone-700 dark:text-stone-300 my-2"
            >é€‰æ‹©è¦å‡»æ€çš„BOSSï¼š</label
          >
          <div class="grid grid-cols-2 gap-4">
            <div
              v-for="num in 12"
              :key="num"
              class="flex items-center space-x-2 p-2 rounded bg-stone-200 dark:bg-stone-600"
            >
              <input
                type="checkbox"
                :value="num"
                v-model="selectedBosses"
                class="form-checkbox text-stone-600 dark:text-stone-300"
              />
              <span class="text-stone-700 dark:text-stone-300"
                >{{ num }}å·</span
              >
            </div>
          </div>
        </div>

        <!-- æ‹›å‹Ÿç›¸å…³ -->
        <div class="mt-4">
          <!-- æ‹›å‹ŸèŒä¸š TAB åˆ†é¡µ -->
          <label class="text-stone-700 dark:text-stone-100">æ‹›å‹Ÿæ¨¡å¼ï¼š</label>
          <div class="flex justify-center my-4">
            <button
              v-for="(tab, index) in ['ç®€å•', 'å…·ä½“']"
              :key="tab"
              @click="activeRecurTab = tab"
              :class="[
                'w-full p-2 first:rounded-l last:rounded-r',
                activeRecurTab  === tab ? 'bg-stone-400 text-white dark:bg-stone-700 dark:text-white' : 'bg-stone-200 text-stone-700 dark:bg-stone-600 dark:text-stone-300',
                index === 0 ? 'rounded-r-none' : '',
                index === 1 ? 'rounded-l-none' : ''
              ]"
            >
              {{ tab }}
            </button>
          </div>

          <!-- ç®€å•æ‹›å‹ŸèŒä¸šæ¿å— -->
          <!-- ç®€å•é¡µï¼šæ ¼å¼æ¨¡æ¿é€‰æ‹© -->

          <div v-if="activeRecurTab === 'ç®€å•'">
            <h3 class="text-stone-700 dark:text-stone-100">æ‹›å‹Ÿä½ç½®ï¼š</h3>
            <!-- card-group -->
            <div
              class="grid grid-cols-1 gap-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 my-2"
            >
              <div
                v-for="(recruit, index) in simpleRecruit"
                :key="index"
                class="p-4 bg-stone-200 rounded shadow dark:bg-stone-700 cursor-pointer relative"
              >
                <h4 class="text-md font-semibold">{{ recruit.chsName }}</h4>
                <div class="absolute top-4 right-4 flex items-center space-x-2">
                  <button
                    @click.stop="decreaseCount(index)"
                    class="bg-stone-400 text-white font-semibold leading-3 w-7 h-7 px-2 py-1 rounded hover:bg-stone-600"
                  >
                    -
                  </button>
                  <span class="text-lg font-bold">{{ recruit.count }}</span>
                  <button
                    @click.stop="increaseCount(index)"
                    class="bg-stone-400 text-white font-semibold leading-3 w-7 h-7 px-2 py-1 rounded hover:bg-stone-600"
                  >
                    +
                  </button>
                </div>
              </div>
            </div>

            <!-- ç”Ÿæˆæ‹›å‹Ÿä¿¡æ¯æŒ‰é’® -->
            <button
              @click="generateRecruitment"
              class="mt-4 py-2 bg-amber-500 text-white rounded hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-700 w-full mb-4"
            >
              ç”Ÿæˆæ‹›å‹Ÿä¿¡æ¯
            </button>

            <!-- æ‹›å‹Ÿä¿¡æ¯å±•ç¤º -->
            <!-- ä¸­æ–‡ -->
            <div
              v-if="chineseRecruitmentText"
              @mouseenter="showCopyChsRecruBtn = true"
              @mouseleave="showCopyChsRecruBtn = false"
              @click="toggleCopyButton"
              class="p-2 bg-stone-100 dark:bg-stone-700 dark:text-stone-100 rounded border dark:border-stone-600 mt-4 relative group select-text"
            >
              <p class="whitespace-pre-wrap">{{ chineseRecruitmentText }}</p>

              <button
                v-if="showCopyChsRecruBtn"
                @click.stop="copyToClipboard(chineseRecruitmentText)"
                class="absolute top-1 right-1 w-8 h-8 flex items-center justify-center rounded bg-stone-300 hover:bg-stone-400 dark:bg-stone-600 dark:hover:bg-stone-500 text-stone-700 dark:text-white transition-opacity duration-300"
              >
                <i class="fa-solid fa-copy"></i>
              </button>
            </div>
            <!-- è‹±æ–‡ -->
            <div
              v-if="englishRecruitmentText"
              @mouseenter="showCopyEngRecruBtn = true"
              @mouseleave="showCopyEngRecruBtn = false"
              @click="toggleCopyButton"
              class="p-2 bg-stone-100 dark:bg-stone-700 dark:text-stone-100 rounded border dark:border-stone-600 mt-4 relative group select-text"
            >
              <p class="whitespace-pre-wrap">{{ englishRecruitmentText }}</p>

              <button
                v-if="showCopyEngRecruBtn"
                @click.stop="showCopyEngRecruBtn(englishRecruitmentText)"
                class="absolute top-1 right-1 w-8 h-8 flex items-center justify-center rounded bg-stone-300 hover:bg-stone-400 dark:bg-stone-600 dark:hover:bg-stone-500 text-stone-700 dark:text-white transition-opacity duration-300"
              >
                <i class="fa-solid fa-copy"></i>
              </button>
            </div>
          </div>

          <!-- å…·ä½“é¡µï¼šæ‹›å‹ŸèŒä¸šæ¿å— -->
          <div v-if="activeRecurTab === 'å…·ä½“'">
            <!-- å…·ä½“é¡µå†…å®¹ï¼Œæ²¿ç”¨ä¹‹å‰æä¾›çš„ä»£ç  -->
            <!-- è¿™é‡Œæ”¾ç½®å®Œæ•´çš„å…·ä½“æ‹›å‹ŸèŒä¸šæ¿å—ä»£ç  -->
            <!-- å…·ä½“æ‹›å‹ŸèŒä¸šæ¿å— -->
            <div class="mb-4">
              <div
                class="flex flex-col flex-col-reverse md:flex-row sm:flex-col-reverse gap-4 my-4"
              >
                <!-- å·¦ä¾§åˆ—ï¼šè§’è‰²åˆ†ç±» -->
                <div
                  class="w-64 sm:w-64 md:w-full md:mr-20 lg:w-full xl:w-full 2xl:w-full 2xl:mr-0"
                >
                  <div class="mt-1">
                    <h4
                      class="font-semibold text-stone-700 dark:text-stone-100 text-sm sm:text-sm md:text-base lg:text-md mb-2"
                    >
                      å¦å…‹ ({{ recruitTeam.tank.length }}/{{
                      dungeonRequireRoles[playerCount].tank }})
                      <!-- æ·»åŠ ä¿®æ”¹æŒ‰é’® -->
                      <button
                        @click="editRoleCount('tank')"
                        class="ml-2 bg-stone-500 text-white p-1 rounded text-xs"
                      >
                        ä¿®æ”¹
                      </button>
                    </h4>
                    <div
                      class="grid grid-cols-5 sm:grid-cols-5 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2"
                    >
                      <!-- å¦å…‹èŒä¸šå¤´åƒ -->
                      <div
                        v-for="(member, index) in recruitTeam.tank"
                        :key="index"
                        class="relative mb-2 grid place-items-center"
                      >
                        <img
                          :src="member.icon"
                          :alt="member.name"
                          class="w-8 h-8 rounded-full object-cover aspect-square"
                        />
                        <span
                          class="text-xs text-stone-600 dark:text-stone-400 mt-1"
                          >{{ member.name }}</span
                        >
                        <button
                          @click="removeRole('tank', index)"
                          class="absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs h-4 w-4 flex items-center justify-center leading-[0.875rem]"
                        >
                          X
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="mt-4">
                    <h4
                      class="font-semibold text-stone-700 dark:text-stone-100 text-sm sm:text-sm md:text-base lg:text-md mb-2"
                    >
                      è¾“å‡º ({{ recruitTeam.dps.length }}/{{
                      dungeonRequireRoles[playerCount].dps }})
                      <button
                        @click="editRoleCount('dps')"
                        class="ml-2 bg-stone-500 text-white p-1 rounded text-xs"
                      >
                        ä¿®æ”¹
                      </button>
                    </h4>
                    <div
                      class="grid grid-cols-5 sm:grid-cols-5 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2"
                    >
                      <!-- è¾“å‡ºèŒä¸šå¤´åƒ -->
                      <div
                        v-for="(member, index) in recruitTeam.dps"
                        :key="index"
                        class="relative mb-2 grid place-items-center"
                      >
                        <img
                          :src="member.icon"
                          :alt="member.name"
                          class="w-8 h-8 rounded-full object-cover aspect-square"
                        />
                        <span
                          class="text-xs text-stone-600 dark:text-stone-400 mt-1"
                          >{{ member.name }}</span
                        >
                        <button
                          @click="removeRole('dps', index)"
                          class="absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs h-4 w-4 flex items-center justify-center leading-[0.875rem]"
                        >
                          X
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="mt-4">
                    <h4
                      class="font-semibold text-stone-700 dark:text-stone-100 text-sm sm:text-sm md:text-base lg:text-md mb-2"
                    >
                      æ²»ç–— ({{ recruitTeam.healer.length }}/{{
                      dungeonRequireRoles[playerCount].healer }})
                      <button
                        @click="editRoleCount('healer')"
                        class="ml-2 bg-stone-500 text-white p-1 rounded text-xs"
                      >
                        ä¿®æ”¹
                      </button>
                    </h4>
                    <div
                      class="grid grid-cols-5 sm:grid-cols-5 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2"
                    >
                      <!-- æ²»ç–—èŒä¸šå¤´åƒ -->
                      <div
                        v-for="(member, index) in recruitTeam.healer"
                        :key="index"
                        class="relative mb-2 grid place-items-center"
                      >
                        <img
                          :src="member.icon"
                          :alt="member.name"
                          class="w-8 h-8 rounded-full object-cover aspect-square"
                        />
                        <span
                          class="text-xs text-stone-600 dark:text-stone-400 mt-1"
                          >{{ member.name }}</span
                        >
                        <button
                          @click="removeRole('healer', index)"
                          class="absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs h-4 w-4 flex items-center justify-center leading-[0.875rem]"
                        >
                          X
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- å³ä¾§åˆ—ï¼šåŸºç¡€èŒä¸š -->
                <div
                  class="grid-cols-2 sm:grid sm:grid-cols-2 sm:gap-2 md:mt-2 md:h-full md:w-full"
                >
                  <div
                    v-for="(role, index) in roles"
                    :key="index"
                    class="flex items-center justify-between p-2 mb-1 bg-stone-100 rounded bg-stone-200 dark:bg-stone-700"
                  >
                    <div class="flex items-center gap-2">
                      <!-- æ˜¾ç¤ºè§’è‰²å›¾æ ‡ -->
                      <img
                        :src="role.icon"
                        alt="èŒä¸šå›¾æ ‡"
                        class="w-6 h-6 rounded"
                      />
                      <span class="text-stone-700 dark:text-stone-100">
                        {{ role.name }}
                      </span>
                    </div>
                    <button
                      @click="openModal(role)"
                      class="bg-stone-500 text-white p-1 rounded text-xs"
                    >
                      ä½ç½®
                    </button>
                  </div>
                </div>
              </div>

              <!-- å¼¹çª— -->
              <div
                v-if="isModalOpen"
                class="fixed inset-0 bg-stone-500 bg-opacity-50 flex justify-center items-center"
              >
                <div
                  class="bg-white dark:bg-stone-800 p-6 rounded shadow-lg w-96"
                >
                  <h4
                    class="text-stone-700 dark:text-stone-100 mb-4 text-lg font-semibold"
                  >
                    é€‰æ‹©èŒä¸šä½ç½®ï¼š
                  </h4>
                  <div class="flex justify-start mb-4">
                    <button
                      @click="assignRole('tank')"
                      class="bg-green-500 text-white p-2 rounded text-sm mr-2"
                      :disabled="recruitTeam.tank.length >= dungeonRequireRoles[playerCount]?.tank"
                    >
                      å¦å…‹
                    </button>
                    <button
                      @click="assignRole('dps')"
                      class="bg-yellow-500 text-white p-2 rounded text-sm mr-2"
                      :disabled="recruitTeam.dps.length >= dungeonRequireRoles[playerCount]?.dps"
                    >
                      è¾“å‡º
                    </button>
                    <button
                      @click="assignRole('healer')"
                      class="bg-stone-500 text-white p-2 rounded text-sm"
                      :disabled="recruitTeam.healer.length >= dungeonRequireRoles[playerCount]?.healer"
                    >
                      æ²»ç–—
                    </button>
                  </div>
                  <div class="mt-4 flex justify-end">
                    <button
                      @click="closeModal"
                      class="bg-stone-500 dark:bg-stone-600 text-white p-2 rounded text-sm"
                    >
                      å…³é—­
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const cityMap = {
        //éƒ¨è½ä¸‰å¤§ä¸»åŸ
        ORG: 'å¥¥æ ¼ç‘ç›(Orgrimmar)',
        OG: 'å¥¥æ ¼ç‘ç›(Orgrimmar)',
        TB: 'é›·éœ†å´–(Thunder Bluff)',
        SM: 'é“¶æœˆåŸ(Silvermoon)',
        UC: 'å¹½æš—åŸ(Undercity)',
        //è”ç›Ÿä¸‰å¤§ä¸»åŸ
        SW: 'æš´é£åŸ(Stormwind)',
        Darn: 'è¾¾çº³è‹æ–¯(Darnassus)',
        Nassus: 'è¾¾çº³è‹æ–¯(Darnassus)',
        IF: 'é“ç‚‰å ¡(Ironforge)',
        //åœ°ç²¾
        BB: 'è—å®æµ·æ¹¾(Booty Bay)',
        STV: 'èŠæ£˜è°·(Stranglethorn Vale)',
        Gadgetzan: 'åŠ åŸºæ£®',
        //å…¶ä»–åœ°åŒº
        Nagrand: 'çº³æ ¼å…°(Nagrand)'
      };

      const dungeonMap = {
        Ramp: 'åœ°ç‹±ç«å ¡å’ï¼šåœ°ç‹±ç«åŸå¢™(Hellfire Ramparts)-å¤–åŸŸ-5',
        HR: 'åœ°ç‹±ç«å ¡å’ï¼šåœ°ç‹±ç«åŸå¢™(Hellfire Ramparts)-å¤–åŸŸ-5',
        BF: 'åœ°ç‹±ç«å ¡å’ï¼šé²œè¡€ç†”ç‚‰(The Blood Furnace)-å¤–åŸŸ-5',
        SH: 'åœ°ç‹±ç«å ¡å’ï¼šç ´ç¢å¤§å…(The Shattered Halls)-å¤–åŸŸ-5',
        SHH: 'åœ°ç‹±ç«å ¡å’ï¼šç ´ç¢å¤§å…(The Shattered Halls)-å¤–åŸŸ-5',
        SP: 'ç›˜ç‰™æ°´åº“ï¼šå¥´éš¶å›´æ (The Slave Pens)-å¤–åŸŸ-5',
        UB: 'ç›˜ç‰™æ°´åº“ï¼šå¹½æš—æ²¼æ³½(The Underbog)-å¤–åŸŸ-5',
        SV: 'ç›˜ç‰™æ°´åº“ï¼šè’¸æ±½åœ°çª–(The Steamvault)-å¤–åŸŸ-5',
        AC: 'å¥¥é‡‘é¡¿ï¼šå¥¥é‡‘å°¼åœ°ç©´(auchindoun: Auchenai Crypts)-å¤–åŸŸ-5',
        Auchenai: 'å¥¥é‡‘é¡¿ï¼šå¥¥é‡‘å°¼åœ°ç©´(auchindoun: Auchenai Crypts)-å¤–åŸŸ-5',
        Seth: 'å¥¥é‡‘é¡¿ï¼šå¡æ³°å…‹å¤§å…(auchindoun: Sethekk Halls)-å¤–åŸŸ-5',
        Sethekkhalls: 'å¥¥é‡‘é¡¿ï¼šå¡æ³°å…‹å¤§å…(auchindoun: Sethekk Halls)-å¤–åŸŸ-5',
        Sethekk: 'å¥¥é‡‘é¡¿ï¼šå¡æ³°å…‹å¤§å…(auchindoun: Sethekk Halls)-å¤–åŸŸ-5',
        SL: 'å¥¥é‡‘é¡¿ï¼šæš—å½±è¿·å®«(auchindoun: Shadow Labyrinth)-å¤–åŸŸ-5',
        MT: 'å¥¥é‡‘é¡¿ï¼šæ³•åŠ›é™µå¢“(auchindoun: Mana Tombs)-å¤–åŸŸ-5',
        ManaT: 'å¥¥é‡‘é¡¿ï¼šæ³•åŠ›é™µå¢“(auchindoun: Mana Tombs)-å¤–åŸŸ-5',
        Meth: 'é£æš´è¦å¡ï¼šèƒ½æºèˆ°(The Mechanar)-å¤–åŸŸ-5',
        mech: 'é£æš´è¦å¡ï¼šèƒ½æºèˆ°(The Mechanar)-å¤–åŸŸ-5',
        mechanar: 'é£æš´è¦å¡ï¼šèƒ½æºèˆ°(The Mechanar)-å¤–åŸŸ-5',
        MEcha: 'é£æš´è¦å¡ï¼šèƒ½æºèˆ°(The Mechanar)-å¤–åŸŸ-5',
        Arca: 'é£æš´è¦å¡ï¼šç¦é­”ç›‘ç‹±(The Arcatraz)-å¤–åŸŸ-5',
        Arcatraz: 'é£æš´è¦å¡ï¼šç¦é­”ç›‘ç‹±(The Arcatraz)-å¤–åŸŸ-5',
        Bota: 'é£æš´è¦å¡ï¼šç”Ÿæ€èˆ¹(The Botanica)-å¤–åŸŸ-5',
        botanica: 'é£æš´è¦å¡ï¼šç”Ÿæ€èˆ¹(The Botanica)-å¤–åŸŸ-5',
        MGT: 'é­”å¯¼å¸ˆå¹³å°(Magisters Terrace)-å¤–åŸŸ-5',
        CoT1: 'æ—¶å…‰ä¹‹ç©´ï¼šæ—§å¸Œå°”æ–¯å¸ƒè±å¾·/é€ƒç¦»æ•¦éœå°”å¾·(The Caverns of Time: Old Hillsbrad Foothills/Escape from Durnholde)-å¡åˆ©å§†å¤š-5',
        OHF: 'æ—¶å…‰ä¹‹ç©´ï¼šæ—§å¸Œå°”æ–¯å¸ƒè±å¾·/é€ƒç¦»æ•¦éœå°”å¾·(The Caverns of Time: Old Hillsbrad Foothills/Escape from Durnholde)-å¡åˆ©å§†å¤š-5',
        CoT2: 'æ—¶å…‰ä¹‹ç©´ï¼šé»‘è‰²æ²¼æ³½(The Caverns of Time: The Black Morass)-å¡åˆ©å§†å¤š-5',
        BlackMoras:
          'æ—¶å…‰ä¹‹ç©´ï¼šé»‘è‰²æ²¼æ³½(The Caverns of Time: The Black Morass)-å¡åˆ©å§†å¤š-5',
        BM: 'æ—¶å…‰ä¹‹ç©´ï¼šé»‘æš—ä¹‹é—¨(The Caverns of Time: The Dark Portal)-å¡åˆ©å§†å¤š-5',
        RFC: 'æ€’ç„°è£‚è°·(Ragefire Chasm)-å¡åˆ©å§†å¤š-5',
        WC: 'å“€å·æ´ç©´(Wailing Caverns)-å¡åˆ©å§†å¤š-5',
        DM: 'æ­»äº¡çŸ¿å‘(The Deadmines)-ä¸œéƒ¨ç‹å›½-5',
        Deadmines: 'æ­»äº¡çŸ¿å‘(The Deadmines)-ä¸œéƒ¨ç‹å›½-5',
        SFK: 'å½±ç‰™åŸå ¡(Shadowfang Keep)-ä¸œéƒ¨ç‹å›½-5',
        Shadowfang: 'å½±ç‰™åŸå ¡(Shadowfang Keep)-ä¸œéƒ¨ç‹å›½-5',
        Stocks: 'ç›‘ç‹±(The Stocks)-ä¸œéƒ¨ç‹å›½-5',
        BFD: 'é»‘æš—æ·±æ¸Š(Blackfathom Deeps)-å¡åˆ©å§†å¤š-5',
        RFK: 'å‰ƒåˆ€æ²¼æ³½(Razorfen Kraul)-å¡åˆ©å§†å¤š-5',
        RFD: 'å‰ƒåˆ€é«˜åœ°(Razorfen Downs)-å¡åˆ©å§†å¤š-5',
        GNOMER: 'è¯ºå§†ç‘æ ¹(Gnomeregan)-ä¸œéƒ¨ç‹å›½-5',
        gnomeregan: 'è¯ºå§†ç‘æ ¹(Gnomeregan)-ä¸œéƒ¨ç‹å›½-5',
        SM: 'è¡€è‰²ä¿®é“é™¢(Scarlet Monastery)-ä¸œéƒ¨ç‹å›½-5',
        Library: 'è¡€è‰²ä¿®é“é™¢ï¼šå›¾ä¹¦é¦†(Library)-ä¸œéƒ¨ç‹å›½-5',
        Armory: 'è¡€è‰²ä¿®é“é™¢ï¼šæ­¦å™¨åº“(Armory)-ä¸œéƒ¨ç‹å›½-5',
        Cathedral: 'è¡€è‰²ä¿®é“é™¢ï¼šæ•™å ‚(Cathedral)-ä¸œéƒ¨ç‹å›½-5',
        Graveyard: 'è¡€è‰²ä¿®é“é™¢ï¼šå¢“å›­(Graveyard)-ä¸œéƒ¨ç‹å›½-5',
        ULDA: 'å¥¥è¾¾æ›¼(Uldaman)-ä¸œéƒ¨ç‹å›½-5',
        ZF: 'ç¥–å°”æ³•æ‹‰å…‹(Zulâ€™Farrak)-å¡åˆ©å§†å¤š-5',
        MARA: 'ç›æ‹‰é¡¿(Maraudon)-å¡åˆ©å§†å¤š-5',
        maraudon: 'ç›æ‹‰é¡¿(Maraudon)-å¡åˆ©å§†å¤š-5',
        ST: 'æ²‰æ²¡çš„ç¥åº™(Sunken Temple)-ä¸œéƒ¨ç‹å›½-5',
        BRD: 'é»‘çŸ³æ·±æ¸Š(Blackrock Depths)-ä¸œéƒ¨ç‹å›½-5',
        DM: 'å„è¿ä¹‹æ§Œ(Dire Maul)-å¡åˆ©å§†å¤š-5',
        Scholo: 'é€šçµå­¦é™¢(Scholomance)-ä¸œéƒ¨ç‹å›½-5',
        Aliveside: 'æ–¯å¦ç´¢å§†ï¼šåŸå ¡åŒº(Aliveside)-ä¸œéƒ¨ç‹å›½-5',
        Undeadside: 'æ–¯å¦ç´¢å§†ï¼šä¸æ­»æ—åŒº(Undeadside)-ä¸œéƒ¨ç‹å›½-5',
        Strath: 'æ–¯å¦ç´¢å§†(Stratholme)-ä¸œéƒ¨ç‹å›½-5',
        Stratholme: 'æ–¯å¦ç´¢å§†(Stratholme)-ä¸œéƒ¨ç‹å›½-5',
        LBRS: 'é»‘çŸ³å¡”ä¸‹å±‚(Lower Blackrock Spire)-ä¸œéƒ¨ç‹å›½-5',
        UBRS: 'é»‘çŸ³å¡”ä¸Šå±‚(Upper Blackrock Spire)-ä¸œéƒ¨ç‹å›½-5',
        'Ring of Blood': 'è¡€ç¯(The Ring of Blood)-å¤–åŸŸ-5',
        ZA: 'ç¥–é˜¿æ›¼(Zulâ€™Aman)-ä¸œéƒ¨ç‹å›½-10',
        Kara: 'å¡æ‹‰èµ(Karazhan)-ä¸œéƒ¨ç‹å›½-10',
        Karazhan: 'å¡æ‹‰èµ(Karazhan)-ä¸œéƒ¨ç‹å›½-10',
        ZG: 'ç¥–å°”æ ¼æ‹‰å¸ƒ(Zulâ€™Gurub)-ä¸œéƒ¨ç‹å›½-10',
        SWP: 'å¤ªé˜³äº•é«˜åœ°(Sunwell Plateau)-ä¸œéƒ¨ç‹å›½-25',
        Eye: 'é£æš´è¦å¡ï¼šé£æš´ä¹‹çœ¼(The Eye)-å¤–åŸŸ-25',
        'HY(HS)': 'æµ·åŠ å°”åœ£å±±(Hyjal Summit)-å¡åˆ©å§†å¤š-25',
        ML: 'ç›ç‘Ÿé‡Œé¡¿çš„å·¢ç©´(Magtheridonâ€™s Lair)-å¤–åŸŸ-25',
        GL: 'æ ¼é²å°”çš„å·¢ç©´(Gruulâ€™s Lair)-å¤–åŸŸ-25',
        SC: 'æ¯’è›‡ç¥æ®¿(Serpentshrine Cavern)-å¤–åŸŸ-25',
        BT: 'é»‘æš—ç¥åº™(Black Temple)-å¤–åŸŸ-25',
        EYE: 'é£æš´ä¹‹çœ¼(Eye of Eternity)-å¤–åŸŸ-25',
        AB: 'é˜¿æ‹‰å¸Œ(Arathi Basin)-ä¸œéƒ¨ç‹å›½-30',
        MC: 'ç†”ç«ä¹‹å¿ƒ(Molten Core)-ä¸œéƒ¨ç‹å›½-40',
        NAXX: 'çº³å…‹è¨ç›æ–¯(Naxxramas)-ä¸œéƒ¨ç‹å›½-40',
        Onyx: "å¥¥å¦®å…‹è¥¿äºšçš„å·¢ç©´(Onyxia's Lair)-å¡åˆ©å§†å¤š-40",
        BWL: 'é»‘ç¿¼ä¹‹å·¢(Blackwing Lair)-ä¸œéƒ¨ç‹å›½-40',
        AQ20: "å®‰çªæ‹‰åºŸå¢Ÿ(Ruins of Ahn'Qiraj)-å¡åˆ©å§†å¤š-40",
        AQ40: "å®‰çªæ‹‰ç¥åº™(Temple of Ahn'Qiraj)-å¡åˆ©å§†å¤š-40",
        AV: 'å¥¥å±±(Alterac Valley)-ä¸œéƒ¨ç‹å›½-40'
      };

      const abbreviationMap = {
        'LOOKING FOR': 'å¯»æ‰¾',
        //Looking for
        LF: 'å¯»æ‰¾',
        //Looking for More
        LFM: 'å¯»æ‰¾æ›´å¤šé˜Ÿå‹',
        //Looking for Group
        LFG: 'å¯»æ‰¾ç»„é˜Ÿ',
        //Looking for 1 More
        LF1M: 'å¯»æ‰¾1åé˜Ÿå‹',
        LF1: 'å¯»æ‰¾1åé˜Ÿå‹',
        LF2m: 'å¯»æ‰¾2åé˜Ÿå‹',
        LF3m: 'å¯»æ‰¾3åé˜Ÿå‹',
        //Damage Per Second
        DPS: 'è¾“å‡ºèŒä¸š',
        Tank: 'å¦å…‹',
        Healer: 'æ²»ç–—',
        heal: 'æ²»ç–—',
        //Off Tank
        OT: 'å‰¯å¦',
        //Main Tank
        MT: 'ä¸»å¦',
        //Please Send Tell
        PST: 'è¯·å¯†è¯­è”ç³»',
        WTS: 'æƒ³è¦å–',
        WTB: 'æƒ³è¦ä¹°',
        //looking for work
        LFW: 'å…è´¹ä»£å·¥',
        '{skull}': '{è¡¨æƒ…éª·é«…å¤´}',
        HC: 'è‹±é›„éš¾åº¦',
        heroic: 'è‹±é›„éš¾åº¦',
        H: 'è‹±é›„éš¾åº¦',
        N: 'æ™®é€šéš¾åº¦',
        normal: 'æ™®é€šéš¾åº¦',
        norm: 'æ™®é€šéš¾åº¦',
        'LAST SPOT': 'æœ€åä¸€ä¸ªåé¢',
        //reputation
        rep: 'å£°æœ›',
        reps: 'å£°æœ›',
        guild: 'å…¬ä¼š',
        party: 'ç»„é˜Ÿ',
        summ: 'å¬å”¤',
        summon: 'å¬å”¤'
      };

      const classesMap = {
        // åŸºç¡€èŒä¸š
        Warrior: 'æˆ˜å£«(Warrior)',
        Paladin: 'åœ£éª‘å£«(Paladin)',
        pala: 'åœ£éª‘å£«(Paladin)',
        Hunter: 'çŒäºº(Hunter)',
        Rogue: 'ç›—è´¼(Rogue)',
        Priest: 'ç‰§å¸ˆ(Priest)',
        Shaman: 'è¨æ»¡ç¥­å¸(Shaman)',
        Mage: 'æ³•å¸ˆ(Mage)',
        Warlock: 'æœ¯å£«(Warlock)',
        Lock: 'æœ¯å£«(Warlock)',
        Druid: 'å¾·é²ä¼Š(Druid)',

        // å¤©èµ‹èŒä¸š
        ArmsWarrior: 'æ­¦å™¨æˆ˜å£«(Arms Warrior) [AW]',
        FuryWarrior: 'ç‹‚æš´æˆ˜å£«(Fury Warrior) [FW]',
        ProtectionWarrior: 'é˜²æŠ¤æˆ˜å£«(Protection Warrior) [PW]',

        HolyPaladin: 'ç¥åœ£åœ£éª‘å£«(Holy Paladin) [HP]',
        ProtectionPaladin: 'é˜²æŠ¤åœ£éª‘å£«(Protection Paladin) [PP]',
        RetributionPaladin: 'æƒ©æˆ’åœ£éª‘å£«(Retribution Paladin) [RP]',

        BeastMasteryHunter: 'å…½ç‹çŒäºº(Beast Mastery Hunter) [BM]',
        MarksmanshipHunter: 'å°„å‡»çŒäºº(Marksmanship Hunter) [MM]',
        SurvivalHunter: 'ç”Ÿå­˜çŒäºº(Survival Hunter) [SV]',

        AssassinationRogue: 'åˆºæ€ç›—è´¼(Assassination Rogue) [AR]',
        CombatRogue: 'æˆ˜æ–—ç›—è´¼(Combat Rogue) [CR]',
        SubtletyRogue: 'æ•é”ç›—è´¼(Subtlety Rogue) [SR]',

        DisciplinePriest: 'æˆ’å¾‹ç‰§å¸ˆ(Discipline Priest) [DP]',
        HolyPriest: 'ç¥åœ£ç‰§å¸ˆ(Holy Priest) [HP]',
        ShadowPriest: 'æš—å½±ç‰§å¸ˆ(Shadow Priest) [SP]',

        ElementalShaman: 'å…ƒç´ è¨æ»¡(Elemental Shaman) [ES]',
        EnhancementShaman: 'å¢å¼ºè¨æ»¡(Enhancement Shaman) [EnS]',
        RestorationShaman: 'æ¢å¤è¨æ»¡(Restoration Shaman) [RS]',
        'Resto shamans': 'æ¢å¤è¨æ»¡(Restoration Shaman)',
        rsham: 'æ¢å¤è¨æ»¡(Restoration Shaman)',

        ArcaneMage: 'å¥¥æœ¯æ³•å¸ˆ(Arcane Mage) [AM]',
        FireMage: 'ç«ç„°æ³•å¸ˆ(Fire Mage) [FM]',
        FrostMage: 'å†°éœœæ³•å¸ˆ(Frost Mage) [FM]', // å¯ä¸ç«ç„°æ³•å¸ˆç®€å†™å†²çªï¼Œéœ€æ ¹æ®å…·ä½“ä¸Šä¸‹æ–‡åˆ¤æ–­

        AfflictionWarlock: 'ç—›è‹¦æœ¯å£«(Affliction Warlock) [AW]',
        DemonologyWarlock: 'æ¶é­”å­¦è¯†æœ¯å£«(Demonology Warlock) [DW]',
        DestructionWarlock: 'æ¯ç­æœ¯å£«(Destruction Warlock) [DeW]',

        BalanceDruid: 'å¹³è¡¡å¾·é²ä¼Š(Balance Druid) [BD]',
        FeralDruid: 'é‡æ€§å¾·é²ä¼Š(Feral Druid) [FD]',
        RestorationDruid: 'æ¢å¤å¾·é²ä¼Š(Restoration Druid) [RD]'
      };

      //ç§æ—
      const raceMap = {
        Human: 'äººç±»(Human)',
        Orc: 'å…½äºº(Orc)',
        Dwarf: 'çŸ®äºº(Dwarf)',
        NightElf: 'æš—å¤œç²¾çµ(Night Elf)',
        Undead: 'äº¡çµ(Undead)',
        Tauren: 'ç‰›å¤´äºº(Tauren)',
        Gnome: 'ä¾å„’(Gnome)',
        Troll: 'å·¨é­”(Troll)'
      };

      //ä¸“ä¸š
      const professionMap = {
        Leatherworking: 'åˆ¶çš®(Leatherworking)',
        Tailoring: 'è£ç¼(Tailoring)',
        Engineering: 'å·¥ç¨‹å­¦(Engineering)',
        Blacksmithing: 'é”»é€ (Blacksmithing)',
        Enchanting: 'é™„é­”(Enchanting)',
        Enchanter: 'é™„é­”(Enchanting)',
        Cooking: 'çƒ¹é¥ª(Cooking)',
        FirstAid: 'æ€¥æ•‘(First Aid)',
        Mining: 'é‡‡çŸ¿(Mining)',
        Fishing: 'é’“é±¼(Fishing)',
        Jewelcrafting: 'ç å®åˆ¶ä½œ(Jewelcrafting)',
        Alchemy: 'ç‚¼é‡‘(Alchemy)'
      };

      const app = Vue.createApp({
        data() {
          return {
            isDarkMode: localStorage.getItem('theme') === 'dark', // ä¸»é¢˜çŠ¶æ€
            inputText: '',
            outputText: '',
            copyTranslateOutputSuccess: false, // å¤åˆ¶æˆåŠŸæ ‡è¯†
            activeTab: 'dungeon', // é»˜è®¤ä¸ºå‰¯æœ¬è¯†åˆ«
            // translationService: 'baidu', // é»˜è®¤ä½¿ç”¨ç™¾åº¦ç¿»è¯‘ æ³¨é‡Šæ—¶åˆ™ä½¿ç”¨ google
            activeCompletionTab: 'å…¨é€š',
            selectedBosses: [],
            activeRecurTab: 'ç®€å•',
            simpleRecruit: [
              {
                chsName: 'å¦å…‹',
                engName: 'Tank',
                count: 0
              },

              {
                chsName: 'æ²»ç–—',
                engName: 'Healer',
                count: 0
              },
              {
                chsName: 'è¾“å‡º',
                engName: 'DPS',
                count: 0
              }
            ],
            showCopyChsRecruBtn: false,
            showCopyEngRecruBtn: false,
            chineseRecruitmentText: '',
            englishRecruitmentText: '',
            isEnglishToChinese: true,
            selectedRegion: '',
            selectedDungeon: '',
            difficulty: 'normal',
            recruitTeam: {
              tank: [],
              dps: [],
              healer: []
            },
            roles: {
              warrior: {
                name: 'æˆ˜å£«',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_warrior.jpg'
              },
              paladin: {
                name: 'åœ£éª‘å£«',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_paladin.jpg'
              },
              hunter: {
                name: 'çŒäºº',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_hunter.jpg'
              },
              rogue: {
                name: 'ç›—è´¼',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_rogue.jpg'
              },
              priest: {
                name: 'ç‰§å¸ˆ',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_priest.jpg'
              },
              shaman: {
                name: 'è¨æ»¡',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_shaman.jpg'
              },
              mage: {
                name: 'æ³•å¸ˆ',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_mage.jpg'
              },
              warlock: {
                name: 'æœ¯å£«',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_warlock.jpg'
              },
              druid: {
                name: 'å¾·é²ä¼Š',
                icon: 'https://wow.zamimg.com/images/wow/icons/large/classicon_druid.jpg'
              }
            },

            dungeonRequireRoles: {
              // æ¯ä¸ªå‰¯æœ¬æ‰€éœ€çš„è§’è‰²æ•°é‡
              5: { tank: 1, dps: 3, healer: 1 },
              10: { tank: 2, dps: 6, healer: 2 },
              25: { tank: 5, dps: 12, healer: 8 },
              40: { tank: 5, dps: 23, healer: 12 }
            },
            tankCount: 0,
            dpsCount: 0,
            healerCount: 0,
            selectedJob: null,
            isModalOpen: false
          };
        },
        mounted() {
          // åˆå§‹åŒ–åŒºåŸŸåˆ—è¡¨
          this.extractRegions();
          if (this.isDarkMode) {
            document.documentElement.classList.add('dark');
          }
        },
        computed: {
          placeholderText() {
            return this.isEnglishToChinese
              ? 'è¾“å…¥è‹±æ–‡å†…å®¹è¿›è¡Œç¿»è¯‘...'
              : 'è¾“å…¥ä¸­æ–‡å†…å®¹è¿›è¡Œç¿»è¯‘...';
          },
          // æ ¹æ®é€‰ä¸­çš„tabæ›´æ–° completionMode
          completionMode() {
            if (this.activeCompletionTab === 'å…¨é€š') {
              return 'full-å…¨é€š';
            } else if (this.activeCompletionTab === 'åŠé€š') {
              return `part-${this.selectedBosses.join(',')}`; // è¿”å›BOSSæ•°ç»„
            }
            return '';
          },
          playerCount() {
            if (!this.selectedDungeon) return 5;
            const match = this.selectedDungeon.match(/\[(\d+)]/);
            return match ? parseInt(match[1], 10) : 5;
          }
        },

        watch: {
          // selectedDungeon æ›´æ–°æ—¶æ¸…ç©º recruitTeam æ•°æ®
          selectedDungeon(newValue) {
            this.recruitTeam.tank = [];
            this.recruitTeam.dps = [];
            this.recruitTeam.healer = [];
          },
          outputText() {
            this.$nextTick(() =>
              this.adjustHeight({ target: this.$refs.outputArea })
            );
          }
        },
        methods: {
          clearText() {
            this.inputText = '';
            this.outputText = '';
          },

          /**
           * è·å–é»˜è®¤çš„ç¿»è¯‘æ–‡æœ¬å†…å®¹ã€‚
           * @returns {string} - é»˜è®¤ç¿»è¯‘å†…å®¹ã€‚
           */
          getDefaultText(isEnglishToChinese) {
            if (isEnglishToChinese) {
              return `
                åœ¨èŠå¤©ç¿»è¯‘é€‰æ‹© â€œè‹±è¯‘ä¸­â€ çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥è¾“å…¥è‹±æ–‡å†…å®¹ï¼Œå¦‚ï¼š
                Fresh KARAZHAN! need Feral/enh/elem//Rsham!!! Check GEAR Aldor BanK! (7/10)
                
                åˆæˆ–è€…ï¼Œç»“åˆèŠå¤©æ¡†æ–‡å­—å¤åˆ¶æ’ä»¶Chatterï¼Œhttps://www.nfuwow.com/plugin/detail/artid/227.htmlï¼Œè¾“å‡ºç²˜è´´çš„è‹±æ–‡ä¸–ç•ŒèŠå¤©è®°å½•ï¼Œå¦‚ï¼š
                [7. world] [Elunaris]: LF3M RFD need tank
                [7. world] [Camelissimo]: Wlock LF Kara any time before reset!
                [7. world] [Zurboorg]: wtb [Righteous Orb]
                [7. world] [Szanyi]: LF2M Alcatraz - tank heal - summ ready
                [7. world] [Elunaris]: LF3M RFD - need tank
              `.trim();
            } else {
              return `
                åœ¨èŠå¤©ç¿»è¯‘é€‰æ‹© â€œä¸­è¯‘è‹±â€ çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥è¾“å…¥ä¸­æ–‡å†…å®¹ï¼Œå¦‚ï¼š
                è¿™æ˜¯ä¸€æ®µæµ‹è¯•ä¸­æ–‡ç¿»è¯‘è‹±æ–‡çš„å¥å­ã€‚
              `.trim();
            }
          },

          /**
           * å¤„ç†è¾“å…¥æ–‡æœ¬ï¼Œæ ¹æ®ä¸åŒæ ‡ç­¾é¡µå’Œæ˜ å°„è§„åˆ™è¿›è¡Œæ›¿æ¢ã€‚
           * @returns {string} - å¤„ç†åçš„æ–‡æœ¬ã€‚
           */
          processText() {
            let text =
              this.inputText || this.getDefaultText(this.isEnglishToChinese);

            // æ ¼å¼åŒ– dungeonMapï¼Œæ ¹æ®å½“å‰æ ‡ç­¾è¿›è¡Œè°ƒæ•´
            const formattedDungeonMap = {};
            for (const [key, value] of Object.entries(dungeonMap)) {
              // å¦‚æœå½“å‰é€‰é¡¹å¡æ˜¯ 'dungeon'ï¼Œåˆ™ä¿ç•™å‰¯æœ¬åç§°ã€åŒºåŸŸå’Œäººæ•°
              if (this.activeTab === 'dungeon') {
                formattedDungeonMap[key] = value;
              } else {
                // å¦åˆ™ï¼Œä»…å»æ‰å‰¯æœ¬äººæ•°éƒ¨åˆ†
                formattedDungeonMap[key] = value.replace(/-\d+$/, ''); // å»æ‰ä»¥ -æ•°å­—ç»“å°¾çš„éƒ¨åˆ†
              }
            }

            // åˆå¹¶æ‰€æœ‰æ˜ å°„
            const combinedMaps = {
              ...(cityMap || {}),
              ...formattedDungeonMap,
              ...(abbreviationMap || {}),
              ...(classesMap || {}),
              ...(professionMap || {}),
              ...(raceMap || {})
            };

            // æ­£åˆ™æ›¿æ¢æ˜ å°„å€¼ï¼Œç¡®ä¿å®Œæ•´å•è¯åŒ¹é…
            for (const [key, value] of Object.entries(combinedMaps)) {
              const regex = new RegExp(`\\b${key}\\b`, 'gi');
              text = text.replace(regex, value);
            }

            this.outputText = text;
            return text;
          },

          /**
           * ç¿»è¯‘å¤„ç†åçš„æ–‡æœ¬å¹¶æ›´æ–°è¾“å‡ºã€‚
           * @returns {Promise<string>} - ç¿»è¯‘åçš„æ–‡æœ¬ã€‚
           */
          async translateText() {
            const originalText = this.processText();
            const wordPositions = this.extractWords(originalText);
            const uniqueWords = [
              ...new Set(wordPositions.map((pos) => pos.word))
            ];

            console.log('æå–çš„å”¯ä¸€è‹±æ–‡å•è¯æˆ–å¥å­ï¼š', uniqueWords);
            console.log('å•è¯æˆ–å¥å­ä½ç½®åˆ—è¡¨ï¼š', wordPositions);

            const translatedWordsMap = await this.batchTranslate(uniqueWords);

            console.log('ç¿»è¯‘ç»“æœæ˜ å°„ï¼š', translatedWordsMap);

            const translatedText = this.applyTranslations(
              originalText,
              wordPositions,
              translatedWordsMap
            );
            this.outputText = translatedText
              .split('\n') // åˆ†å‰²æˆå¤šè¡Œ
              .map((line) => line.trim()) // å»é™¤æ¯ä¸€è¡Œé¦–å°¾ç©ºæ ¼
              .join('\n'); // åˆå¹¶å›å¤šè¡Œæ–‡æœ¬;
            return translatedText;
          },

          /**
           * æå–æ–‡æœ¬ä¸­çš„å•è¯æˆ–çŸ­è¯­åŠå…¶åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®ã€‚
           * @param {string} text - éœ€è¦æå–å•è¯çš„æ–‡æœ¬ã€‚
           * @returns {Array<{word: string, start: number, end: number}>} - åŒ…å«å•è¯å’Œä½ç½®çš„æ•°ç»„ã€‚
           */
          extractWords(text) {
            const wordPositions = [];
            let wordRegex;

            if (this.isEnglishToChinese) {
              // åŒ¹é…è‹±æ–‡å•è¯æˆ–çŸ­è¯­
              wordRegex = /[a-zA-Z]+(?:\s+[a-zA-Z]+)*/g;
            } else {
              // åŒ¹é…ä¸­æ–‡çŸ­è¯­ï¼ˆæŒ‰è¯æå–ï¼Œå¯æ ¹æ®éœ€è¦ä¼˜åŒ–ï¼‰
              wordRegex = /[\u4e00-\u9fa5ï¼Œã€‚ï¼ï¼Ÿ]+/g;
            }

            let match;
            while ((match = wordRegex.exec(text)) !== null) {
              const word = match[0];
              const start = match.index;
              const end = start + word.length;
              wordPositions.push({ word, start, end });
            }

            return wordPositions;
          },

          /**
           * æ‰¹é‡ç¿»è¯‘å•è¯åˆ—è¡¨ã€‚
           * @param {string[]} words - éœ€è¦ç¿»è¯‘çš„å•è¯æ•°ç»„ã€‚
           * @returns {Promise<Map<string, string>>} - åŒ…å«ç¿»è¯‘ç»“æœçš„æ˜ å°„è¡¨ã€‚
           */
          async batchTranslate(words) {
            const chunkSize = 100;
            const delay = (ms) =>
              new Promise((resolve) => setTimeout(resolve, ms));
            const translatedWordsMap = new Map();

            for (let i = 0; i < words.length; i += chunkSize) {
              const chunk = words.slice(i, i + chunkSize);
              const translatedChunk = await this.translateChunk(chunk);
              chunk.forEach((word, index) => {
                translatedWordsMap.set(word, translatedChunk[index] || word);
              });

              await delay(300); // å»¶æ—¶ï¼Œé¿å… API é™åˆ¶
            }

            return translatedWordsMap;
          },

          /**
           * ç¿»è¯‘å•æ‰¹å•è¯åˆ—è¡¨ã€‚
           * @param {string[]} words - éœ€è¦ç¿»è¯‘çš„å•è¯æ•°ç»„ã€‚
           * @returns {Promise<string[]>} - ç¿»è¯‘åçš„å•è¯æ•°ç»„ã€‚
           */
          async translateChunk(words) {
            const chunk = words.join('\n');
            return this.translationService === 'baidu'
              ? await this.translateWithBaidu(chunk)
              : await this.translateWithGoogle(chunk);
          },

          /**
           * ä½¿ç”¨ç™¾åº¦ç¿»è¯‘æœåŠ¡è¿›è¡Œæ‰¹é‡ç¿»è¯‘ã€‚
           * @param {string} chunk - å¾…ç¿»è¯‘çš„æ–‡æœ¬å—ã€‚
           * @returns {Promise<string[]>} - ç¿»è¯‘åçš„æ–‡æœ¬æ•°ç»„ã€‚
           */
          async translateWithBaidu(chunk) {
            const appid = '20250301002288526';
            const key = 'hl9Xy493Ixk8pmdSln0v';
            const salt = Date.now();
            const from = this.isEnglishToChinese ? 'en' : 'zh';
            const to = this.isEnglishToChinese ? 'zh' : 'en';
            const sign = md5(`${appid}${chunk}${salt}${key}`);
            const url = `https://fanyi-api.baidu.com/api/trans/vip/translate?q=${encodeURIComponent(
              chunk
            )}&from=${from}&to=${to}&appid=${appid}&salt=${salt}&sign=${sign}`;

            const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(
              url
            )}`;

            try {
              const response = await fetch(proxyUrl);
              const result = await response.json();
              return result.trans_result
                ? result.trans_result.map((item) => item.dst)
                : [];
            } catch (error) {
              console.error('ç™¾åº¦ç¿»è¯‘é”™è¯¯ï¼š', error);
              return [];
            }
          },

          /**
           * ä½¿ç”¨ Google ç¿»è¯‘æœåŠ¡è¿›è¡Œæ‰¹é‡ç¿»è¯‘ã€‚
           * @param {string} chunk - å¾…ç¿»è¯‘çš„æ–‡æœ¬å—ã€‚
           * @returns {Promise<string[]>} - ç¿»è¯‘åçš„æ–‡æœ¬æ•°ç»„ã€‚
           */
          async translateWithGoogle(chunk) {
            const from = this.isEnglishToChinese ? 'en' : 'zh';
            const to = this.isEnglishToChinese ? 'zh' : 'en';
            const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(
              chunk
            )}`;
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(
              url
            )}`;

            try {
              const response = await fetch(proxyUrl);
              const data = await response.json();
              const result = JSON.parse(data.contents);
              return result && Array.isArray(result[0])
                ? result[0].map((item) => item[0].replace(/\n/g, ''))
                : [];
            } catch (error) {
              console.error('Google ç¿»è¯‘é”™è¯¯ï¼š', error);
              return [];
            }
          },

          /**
           * å°†ç¿»è¯‘ç»“æœåº”ç”¨åˆ°åŸæ–‡æœ¬ä¸­ã€‚
           * @param {string} text - åŸæ–‡æœ¬ã€‚
           * @param {Array} wordPositions - å•è¯ä½ç½®æ•°ç»„ã€‚
           * @param {Map} translatedWordsMap - ç¿»è¯‘ç»“æœæ˜ å°„ã€‚
           * @returns {string} - åº”ç”¨ç¿»è¯‘åçš„æ–‡æœ¬ã€‚
           */
          applyTranslations(text, wordPositions, translatedWordsMap) {
            let offset = 0;
            for (const { word, start, end } of wordPositions) {
              const translatedWord = translatedWordsMap.get(word) || word;
              const adjustedStart = start + offset;
              const adjustedEnd = end + offset;

              text =
                text.substring(0, adjustedStart) +
                translatedWord +
                text.substring(adjustedEnd);

              offset += translatedWord.length - word.length;
            }

            return text;
          },
          adjustHeight(event) {
            const textarea = event.target;
            textarea.style.height = 'auto';
            textarea.style.height = `${textarea.scrollHeight}px`;
          },
          toggleLanguage() {
            this.isEnglishToChinese = !this.isEnglishToChinese;
            [this.inputText, this.outputText] = [
              this.outputText,
              this.inputText
            ]; // äº¤æ¢å†…å®¹
          },
          clearText() {
            this.inputText = '';
            this.outputText = '';
          },
          setCompletionMode(tab) {
            this.activeCompletionTab = tab;
            if (tab === 'å…¨é€š') {
              this.selectedBosses = []; // å…¨é€šæ—¶æ¸…ç©ºå·²é€‰æ‹©çš„BOSS
            }
          },
          increaseCount(index) {
            if (this.simpleRecruit[index].count < 40) {
              this.simpleRecruit[index].count++;
            }
          },
          decreaseCount(index) {
            if (this.simpleRecruit[index].count > 0) {
              this.simpleRecruit[index].count--;
            }
          },
          selectRole(role, job) {
            const icon = this.roles[job]?.icon || 'path/to/default-icon.png';

            if (role === 'tank') {
              if (
                this.tankCount < this.dungeonRequireRoles[this.playerCount].tank
              ) {
                this.tankIcons.push(icon);
                this.tankCount++;
              }
            } else if (role === 'dps') {
              if (
                this.dpsCount < this.dungeonRequireRoles[this.playerCount].dps
              ) {
                this.dpsIcons.push(icon);
                this.dpsCount++;
              }
            } else if (role === 'healer') {
              if (
                this.healerCount <
                this.dungeonRequireRoles[this.playerCount].healer
              ) {
                this.healerIcons.push(icon);
                this.healerCount++;
              }
            }
          },

          clearRoleIcons() {
            this.tankIcons = [];
            this.dpsIcons = [];
            this.healerIcons = [];
          },
          updateRoleCounts() {
            const roleConfig =
              this.dungeonRequireRoles[this.playerCount] ||
              this.dungeonRequireRoles[5];
            this.tankCount = this.selectedRoles.filter(
              (role) => role === 'tank'
            ).length;
            this.dpsCount = this.selectedRoles.filter(
              (role) => role === 'dps'
            ).length;
            this.healerCount = this.selectedRoles.filter(
              (role) => role === 'healer'
            ).length;
          },
          editRoleCount(role) {
            const currentCount =
              this.dungeonRequireRoles[this.playerCount]?.[role] || 0;
            const newCount = prompt(
              `è¯·è¾“å…¥æ–°çš„ ${role} æ•°é‡ï¼ˆå½“å‰: ${currentCount}ï¼‰`,
              currentCount
            );
            if (
              newCount !== null &&
              !isNaN(newCount) &&
              Number(newCount) >= 0
            ) {
              this.dungeonRequireRoles[this.playerCount][role] =
                Number(newCount);
            } else {
              alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•´æ•°ï¼');
            }
          },
          openModal(job) {
            this.selectedJob = job;
            this.isModalOpen = true;
          },
          closeModal() {
            this.isModalOpen = false;
            this.selectedJob = null;
          },
          assignRole(role) {
            const maxCount =
              this.dungeonRequireRoles[this.playerCount]?.[role] || 0;
            const jobInfo = this.selectedJob;
            // console.log(this.selectedJob, jobInfo);

            if (role === 'tank' && this.recruitTeam.tank.length < maxCount) {
              this.recruitTeam.tank.push({
                name: jobInfo.name,
                icon: jobInfo.icon
              });
            } else if (
              role === 'dps' &&
              this.recruitTeam.dps.length < maxCount
            ) {
              this.recruitTeam.dps.push({
                name: jobInfo.name,
                icon: jobInfo.icon
              });
            } else if (
              role === 'healer' &&
              this.recruitTeam.healer.length < maxCount
            ) {
              this.recruitTeam.healer.push({
                name: jobInfo.name,
                icon: jobInfo.icon
              });
            }

            this.closeModal();
          },
          removeRole(role, index) {
            if (role === 'tank') {
              this.recruitTeam.tank.splice(index, 1);
            } else if (role === 'dps') {
              this.recruitTeam.dps.splice(index, 1);
            } else if (role === 'healer') {
              this.recruitTeam.healer.splice(index, 1);
            }
          },

          generateRecruitment() {
            if (
              !this.selectedRegion ||
              !this.selectedDungeon ||
              !this.difficulty
            ) {
              this.recruitmentText = 'è¯·å…ˆé€‰æ‹©åŒºåŸŸã€å‰¯æœ¬å’Œéš¾åº¦ï¼';
              return;
            }

            // ç»Ÿè®¡å„èŒä¸šæ•°é‡
            const recruitCounts = this.simpleRecruit
              .filter((recruit) => recruit.count > 0)
              .map((recruit) => ({
                chsName: recruit.chsName,
                engName: recruit.engName,
                count: recruit.count
              }));

            if (recruitCounts.length === 0) {
              alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ‹›å‹ŸèŒä¸šï¼');
              return;
            }

            // å…ˆå»æ‰ [æ•°å­—]
            const dungeonName = this.selectedDungeon
              .replace(/\[\d+\]/g, '')
              .trim();

            // ç”Ÿæˆä¸­æ–‡æ ¼å¼
            const chineseRecruitText = recruitCounts
              .map((recruit) => `${recruit.chsName} x${recruit.count}`)
              .join('ï¼Œ');

            // æå–ä¸­æ–‡å‰¯æœ¬åç§°
            const chineseDungeonName = dungeonName.replace(
              /.*?[\] ]+([^ï¼š()]+)[ï¼š]?.*\(.*\)$/,
              '$1'
            );

            // ç”Ÿæˆä¸­æ–‡æ‹›å‹Ÿä¿¡æ¯ï¼Œæ ¹æ®å…¨é€šæˆ–åŠé€šè°ƒæ•´
            let chineseCompletionInfo = '';
            if (this.activeCompletionTab === 'å…¨é€š') {
              chineseCompletionInfo = '[å…¨é€š]';
            } else if (this.activeCompletionTab === 'åŠé€š') {
              // å¤„ç†åŠé€šBOSSçš„é€‰æ‹©æ ¼å¼
              const selectedBossesFormatted = this.selectedBosses
                .map((num) => `è€${num}`)
                .join('ã€');
              chineseCompletionInfo = `[åªæ‰“${selectedBossesFormatted}]`;
            }

            this.chineseRecruitmentText = `[${chineseDungeonName}][${
              this.difficulty === 'normal' ? 'æ™®é€šæ¨¡å¼' : 'è‹±é›„æ¨¡å¼'
            }]${chineseCompletionInfo}éœ€è¦${chineseRecruitText}`;

            // ç”Ÿæˆè‹±æ–‡æ ¼å¼
            const englishRecruitText = recruitCounts
              .map(
                (recruit) => `${recruit.count} ${recruit.engName.toLowerCase()}`
              )
              .join(', ');

            // æå–è‹±æ–‡å‰¯æœ¬ç®€å†™åç§°
            const englishDungeonShortName =
              dungeonName.match(/\[\w+\]/)?.[0]?.replace(/[\[\]]/g, '') || '';

            // æå–è‹±æ–‡å‰¯æœ¬åç§°
            const englishDungeonName = dungeonName.replace(/.*\((.+)\)$/, '$1');

            // ç”Ÿæˆè‹±æ–‡æ‹›å‹Ÿä¿¡æ¯ï¼Œæ ¹æ®å…¨é€šæˆ–åŠé€šè°ƒæ•´
            let englishCompletionInfo = '';
            if (this.activeCompletionTab === 'å…¨é€š') {
              englishCompletionInfo = 'full run';
            } else if (this.activeCompletionTab === 'åŠé€š') {
              // å¤„ç†åŠé€šBOSSçš„é€‰æ‹©æ ¼å¼ï¼Œé¿å…é‡å¤çš„ boss
              const selectedBossesFormatted = this.selectedBosses
                .map((num) => `boss${num}`)
                .join(','); // ä¿®å¤è¿™é‡Œçš„é€—å·æ‹¼æ¥
              englishCompletionInfo = `only kill ${selectedBossesFormatted}`;
            }

            this.englishRecruitmentText = `[LF][${englishDungeonName}][${englishDungeonShortName}][${
              this.difficulty === 'normal' ? 'Normal' : 'Heroic'
            }] need ${englishRecruitText} ,${englishCompletionInfo}`;
          },
          copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
              alert('æ‹›å‹Ÿä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
          },
          toggleCopyButton() {
            // ç§»åŠ¨è®¾å¤‡ç‚¹å‡»åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
            this.showCopyChsRecruBtn = !this.showCopyChsRecruBtn;
            this.showCopyEngRecruBtn = !this.showCopyEngRecruBtn;
          },
          toggleTheme() {
            this.isDarkMode = !this.isDarkMode;
            localStorage.setItem('theme', this.isDarkMode ? 'dark' : 'light');
            document.documentElement.classList.toggle('dark', this.isDarkMode);
          },
          // æå–åŒºåŸŸåˆ—è¡¨
          extractRegions() {
            const regionSet = new Set();
            for (const value of Object.values(dungeonMap)) {
              const region = value.split('-')[1];
              if (region) regionSet.add(region);
            }
            this.regions = Array.from(regionSet);
            this.selectedRegion = this.regions[0] || '';
            this.updateDungeonList();
          },
          // æ›´æ–°å‰¯æœ¬åˆ—è¡¨
          updateDungeonList() {
            this.filteredDungeons = Object.entries(dungeonMap)
              .filter(([, value]) => value.includes(`-${this.selectedRegion}`))
              .map(([key, value]) => ({
                key,
                value: `[${key}][${value.split('-')[2]}] ${value.split('-')[0]}`
              }));

            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªå‰¯æœ¬
            this.selectedDungeon = this.filteredDungeons.length
              ? this.filteredDungeons[0].value
              : '';
          },

          switchTab(tabName) {
            this.activeTab = tabName;
            this.clearText(); // åˆ‡æ¢ TAB æ—¶æ¸…é™¤è¾“å‡ºæ–‡æœ¬
          }
        }
      });

      app.mount('#app');
    </script>
  </body>
</html>
